{% extends 'base.html.twig' %}

{% block title %}Liste des profils{% endblock %}

{% block body %}
		<!-- Contenu de la page -->
		<div class="body">
				<div class="container">
					<div class="form-group float-end mb-5">
						<input type="text" class="search form-control" placeholder="Rechercher">
					</div>
					<span class="counter pull-right"></span>
					<table class="table table-hover table-bordered results">
						<thead>
							<tr>
								<th class="col-md-5 col-xs-5">Profil</th>
								<th class="col-md-4 col-xs-4">Nom</th>
								<th class="col-md-3 col-xs-3">Prénom</th>
								<th class="col-md-3 col-xs-3">Action</th>
							</tr>
								<tr class="warning no-result">
								<td colspan="4"><i class="fa fa-warning"></i> Pas de résultats</td>
							</tr>
						</thead>
						<tbody>
							{% for candidat in candidats %}
								<tr>
									<td>{{ candidat.Profil }}</td>
									<td>{{ candidat.Nom }}</td>
									<td>{{ candidat.Prenom }}</td>
									<td><a href='{{ path('app_profil_edit', {id:  candidat.Id }) }}'>Voir</a></td>
								</tr>
							 {% endfor %}
						</tbody>
					</table>
				</div>
		</div>
		<!-- Contenu de la page -->

		<!-- SCRIPT pour tableau -->

		<script type="text/javascript">
			$(document).ready(function() {
				$(".search").keyup(function () {
					var searchTerm = $(".search").val();
					var listItem = $('.results tbody').children('tr');
					var searchSplit = searchTerm.replace(/ /g, "'):containsi('")
					
				$.extend($.expr[':'], {'containsi': function(elem, i, match, array){
						return (elem.textContent || elem.innerText || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
					}
				});
					
				$(".results tbody tr").not(":containsi('" + searchSplit + "')").each(function(e){
					$(this).attr('visible','false');
				});

				$(".results tbody tr:containsi('" + searchSplit + "')").each(function(e){
					$(this).attr('visible','true');
				});

				var jobCount = $('.results tbody tr[visible="true"]').length;
					$('.counter').text(jobCount + ' profils');

				if(jobCount == '0') {$('.no-result').show();}
					else {$('.no-result').hide();}
						});
				});
		</script>
		<!-- SCRIPT pour tableau -->

	
	</body>
	<!-- Corps de la page -->
{% endblock %}